{"remainingRequest":"D:\\xampp\\htdocs\\MyPro\\pureshop-phone\\node_modules\\babel-loader\\lib\\index.js!D:\\xampp\\htdocs\\MyPro\\pureshop-phone\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\xampp\\htdocs\\MyPro\\pureshop-phone\\src\\components\\subcomponents\\comments.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\xampp\\htdocs\\MyPro\\pureshop-phone\\src\\components\\subcomponents\\comments.vue","mtime":1539427784999},{"path":"D:\\xampp\\htdocs\\MyPro\\pureshop-phone\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853417988},{"path":"D:\\xampp\\htdocs\\MyPro\\pureshop-phone\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000},{"path":"D:\\xampp\\htdocs\\MyPro\\pureshop-phone\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { Toast } from \"mint-ui\";\nexport default {\n  inject: ['reload'],\n  data: function data() {\n    return {\n      list: [],\n      cmt_content: '',\n      pageIndex: 0\n    };\n  },\n  methods: {\n    getCommentsList: function getCommentsList() {\n      var _this = this;\n\n      this.pageIndex++;\n      console.log(this.pageIndex);\n      var url = 'newslist/commentlist?nid=' + this.id + '&pno=' + this.pageIndex;\n      this.$http.get(url).then(function (res) {\n        _this.list = _this.list.concat(res.body.data);\n      });\n    },\n    cmt_send: function cmt_send() {\n      var _this2 = this;\n\n      var username = '匿名用户';\n      this.$http.post('newslist/add', {\n        nid: this.id,\n        content: this.cmt_content,\n        username: username\n      }).then(function (res) {\n        // this.reload();\n        _this2.pageIndex = 0;\n        _this2.list = [];\n\n        _this2.getCommentsList();\n\n        Toast(res.body.msg);\n      });\n    }\n  },\n  created: function created() {\n    this.getCommentsList();\n  },\n  props: ['id']\n};",{"version":3,"sources":["comments.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAoBA,SAAA,KAAA,QAAA,SAAA;AACA,eAAA;AACA,UAAA,CAAA,QAAA,CADA;AAEA,MAFA,kBAEA;AACA,WAAA;AACA,YAAA,EADA;AAEA,mBAAA,EAFA;AAGA,iBAAA;AAHA,KAAA;AAKA,GARA;AASA,WAAA;AACA,mBADA,6BACA;AAAA;;AACA,WAAA,SAAA;AACA,cAAA,GAAA,CAAA,KAAA,SAAA;AACA,UAAA,MAAA,8BAAA,KAAA,EAAA,GAAA,OAAA,GAAA,KAAA,SAAA;AACA,WAAA,KAAA,CAAA,GAAA,CAAA,GAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,cAAA,IAAA,GAAA,MAAA,IAAA,CAAA,MAAA,CAAA,IAAA,IAAA,CAAA,IAAA,CAAA;AACA,OAFA;AAGA,KARA;AAUA,YAVA,sBAUA;AAAA;;AACA,UAAA,WAAA,MAAA;AACA,WAAA,KAAA,CAAA,IAAA,CAAA,cAAA,EAAA;AACA,aAAA,KAAA,EADA;AAEA,iBAAA,KAAA,WAFA;AAGA,kBAAA;AAHA,OAAA,EAIA,IAJA,CAIA,UAAA,GAAA,EAAA;AACA;AACA,eAAA,SAAA,GAAA,CAAA;AACA,eAAA,IAAA,GAAA,EAAA;;AACA,eAAA,eAAA;;AACA,cAAA,IAAA,IAAA,CAAA,GAAA;AAEA,OAXA;AAYA;AAxBA,GATA;AAoCA,SApCA,qBAoCA;AACA,SAAA,eAAA;AACA,GAtCA;AAuCA,SAAA,CAAA,IAAA;AAvCA,CAAA","sourcesContent":["<template>\r\n\t<div class=\"app_subcomments\">\r\n\t\t<h1>发表评论</h1>\r\n\t\t<hr>\r\n\t\t<textarea name=\"\" id=\"\" cols=\"30\" rows=\"5\" placeholder=\"请输入评论的内容（不超过120字）\" maxlength=\"120\" v-model='cmt_content'></textarea>\r\n\t\t<mt-button size='large' type='primary' @click=\"cmt_send()\" class='addCom'>发表评论</mt-button>\r\n\t\t<div class=\"cmt-list\" >\r\n\t\t\t<div class=\"cmt-list-item\" v-for='(item,i) in list'>\r\n\t\t\t\t<div class=\"cmt-title\">\r\n\t\t\t\t\t第{{i+1}}楼&nbsp;&nbsp;用户：{{item.username}} 发表时间：{{item.ctime|dateFormat}}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"cmt-body\">\r\n\t\t\t\t\t{{item.content}}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<mt-button size='large' type='danger' @click='getCommentsList()' class='addCom'>加载更多</mt-button>\r\n\t\t</div>\r\n\t</div>\r\n</template>\t\r\n<script>\r\n\timport {Toast} from \"mint-ui\"\r\n\texport default{\r\n\t\tinject:['reload'],\r\n\t\tdata(){\r\n\t\t\treturn{\r\n\t\t\t\tlist:[],\r\n\t\t\t\tcmt_content:'',\r\n\t\t\t\tpageIndex:0\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\tgetCommentsList(){\r\n\t\t\t\tthis.pageIndex++;\r\n\t\t\t\tconsole.log(this.pageIndex);\r\n\t\t\t\tvar url='newslist/commentlist?nid='+this.id+'&pno='+this.pageIndex;\r\n\t\t\t\tthis.$http.get(url).then((res)=>{\r\n\t\t\t\t\tthis.list=this.list.concat(res.body.data);\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\r\n\t\t\tcmt_send(){\r\n\t\t\t\tvar username='匿名用户';\r\n\t\t\t\tthis.$http.post('newslist/add',{\r\n\t\t\t\t\tnid:this.id,\r\n\t\t\t\t\tcontent:this.cmt_content,\r\n\t\t\t\t\tusername:username\r\n\t\t\t\t}).then((res)=>{\r\n\t\t\t\t\t// this.reload();\r\n\t\t\t\t\tthis.pageIndex=0;\r\n\t\t\t\t\tthis.list=[];\r\n\t\t\t\t\tthis.getCommentsList()\r\n\t\t\t\t\tToast(res.body.msg);\r\n\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tcreated(){\r\n\t\t\tthis.getCommentsList();\r\n\t\t},\r\n\t\tprops:['id']\r\n\t}\r\n</script>\r\n<style>\r\n\t.addCom{\r\n\t\tbackground: #F0085C !important;\r\n\t}\r\n\t.cmt-list-item{\r\n\t\tborder: 1px solid #969696;\r\n\t\tpadding: 4px;\r\n\t\tfont-size: 13px;\r\n\t}\r\n\th1{\r\n\t\tfont-size: 18px !important;\r\n\t}\r\n\ttextarea{\r\n\t\tfont-size: 14px !important;\r\n\t}\r\n\t.cmt-list{\r\n\t\tmargin: 15px 0px;\r\n\t}\r\n\t.cmt-title{\r\n\t\tline-height: 30px;\r\n\t\tcolor: #969696;\r\n\t}\r\n\t.cmt-body{\r\n\t\ttext-indent: 2em;\r\n\t\tline-height: 30px;\r\n\t}\r\n</style>"],"sourceRoot":"src\\components\\subcomponents"}]}